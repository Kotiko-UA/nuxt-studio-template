import{j as bt,h as kt,c as Kt}from"./BFG3cccd.js";import{p as zt,k as Bt,q as Ut,a as _t,b as qt,c as Gt}from"./D7erS14I.js";import{A as Et,B as Ht,p as Yt,C as Ft,D as z,E as Jt,G as Zt,H as Vt,I as Xt,b as xt,J as Qt,K as te}from"#entry";import{j as ee}from"./DVmGH3J-.js";import"./DVHUAYF7.js";function B(s,t=50,e=20){return new Promise((n,i)=>{Ot(s,o=>{o?i(o):n(!0)},t,e)})}function Ot(s,t,e=50,n=20){if(s())return t(void 0);setTimeout(()=>{Ot(s,t,e,n-1)},e),n===0&&t(new Error("Max tries reached"))}var q={exports:{}},se=q.exports,at;function ne(){return at||(at=1,(function(s,t){(function(e,n,i){s.exports=i(),s.exports.default=i()})("slugify",se,function(){var e=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),n=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function i(o,u){if(typeof o!="string")throw new Error("slugify: string argument expected");u=typeof u=="string"?{replacement:u}:u||{};var f=n[u.locale]||{},p=u.replacement===void 0?"-":u.replacement,r=u.trim===void 0?!0:u.trim,a=o.normalize().split("").reduce(function(l,h){var c=f[h];return c===void 0&&(c=e[h]),c===void 0&&(c=h),c===p&&(c=" "),l+c.replace(u.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return u.strict&&(a=a.replace(/[^A-Za-z0-9\s]/g,"")),r&&(a=a.trim()),a=a.replace(/\s+/g,p),u.lower&&(a=a.toLowerCase()),a}return i.extend=function(o){Object.assign(e,o)},i})})(q)),q.exports}var ie=ne();const re=Et(ie),oe=/^\d+(?:\.\d+)*(?:\.x)?$/,ae={slugifyOptions:{lower:!0}};function ce(s,t={}){const e=Ht(t,ae),{basename:n,extension:i,stem:o}=he(s.id);return{path:ue(o,e),...s,title:s.title||le(jt(n)),stem:o,extension:i}}const ue=(s,{forceLeadingSlash:t=!0,slugifyOptions:e={}}={})=>(s=s.split("/").map(n=>re(jt(n),e)).join("/"),t?Yt(Ft(s)):s),le=s=>s.split(/[\s-]/g).map(zt).join(" ");function jt(s){return s=s.split(/[/:]/).pop(),oe.test(s)?s:s.replace(/(\d+\.)?(.*)/,"$2").replace(/^index(\.draft)?$/,"").replace(/\.draft$/,"")}const he=s=>{const[t,...e]=s.split(/[:/]/),[,n,i]=e[e.length-1]?.match(/(.*)\.([^.]+)$/)||[];n&&(e[e.length-1]=n);const o=(e||[]).join("/");return{source:t,stem:o,extension:i,basename:n||""}};var F,ct;function fe(){if(ct)return F;ct=1,F=s;function s(n,i,o){n instanceof RegExp&&(n=t(n,o)),i instanceof RegExp&&(i=t(i,o));var u=e(n,i,o);return u&&{start:u[0],end:u[1],pre:o.slice(0,u[0]),body:o.slice(u[0]+n.length,u[1]),post:o.slice(u[1]+i.length)}}function t(n,i){var o=i.match(n);return o?o[0]:null}s.range=e;function e(n,i,o){var u,f,p,r,a,l=o.indexOf(n),h=o.indexOf(i,l+1),c=l;if(l>=0&&h>0){if(n===i)return[l,h];for(u=[],p=o.length;c>=0&&!a;)c==l?(u.push(c),l=o.indexOf(n,c+1)):u.length==1?a=[u.pop(),h]:(f=u.pop(),f<p&&(p=f,r=h),h=o.indexOf(i,c+1)),c=l<h&&l>=0?l:h;u.length&&(a=[p,r])}return a}return F}var J,ut;function pe(){if(ut)return J;ut=1;var s=fe();J=a;var t="\0SLASH"+Math.random()+"\0",e="\0OPEN"+Math.random()+"\0",n="\0CLOSE"+Math.random()+"\0",i="\0COMMA"+Math.random()+"\0",o="\0PERIOD"+Math.random()+"\0";function u(m){return parseInt(m,10)==m?parseInt(m,10):m.charCodeAt(0)}function f(m){return m.split("\\\\").join(t).split("\\{").join(e).split("\\}").join(n).split("\\,").join(i).split("\\.").join(o)}function p(m){return m.split(t).join("\\").split(e).join("{").split(n).join("}").split(i).join(",").split(o).join(".")}function r(m){if(!m)return[""];var v=[],w=s("{","}",m);if(!w)return m.split(",");var y=w.pre,x=w.body,$=w.post,E=y.split(",");E[E.length-1]+="{"+x+"}";var N=r($);return $.length&&(E[E.length-1]+=N.shift(),E.push.apply(E,N)),v.push.apply(v,E),v}function a(m){return m?(m.substr(0,2)==="{}"&&(m="\\{\\}"+m.substr(2)),d(f(m),!0).map(p)):[]}function l(m){return"{"+m+"}"}function h(m){return/^-?0\d/.test(m)}function c(m,v){return m<=v}function g(m,v){return m>=v}function d(m,v){var w=[],y=s("{","}",m);if(!y)return[m];var x=y.pre,$=y.post.length?d(y.post,!1):[""];if(/\$$/.test(y.pre))for(var E=0;E<$.length;E++){var N=x+"{"+y.body+"}"+$[E];w.push(N)}else{var Rt=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(y.body),tt=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(y.body),K=Rt||tt,Dt=y.body.indexOf(",")>=0;if(!K&&!Dt)return y.post.match(/,(?!,).*\}/)?(m=y.pre+"{"+y.body+n+y.post,d(m)):[m];var O;if(K)O=y.body.split(/\.\./);else if(O=r(y.body),O.length===1&&(O=d(O[0],!1).map(l),O.length===1))return $.map(function(Lt){return y.pre+O[0]+Lt});var R;if(K){var et=u(O[0]),st=u(O[1]),Pt=Math.max(O[0].length,O[1].length),nt=O.length==3?Math.abs(u(O[2])):1,it=c,Tt=st<et;Tt&&(nt*=-1,it=g);var Wt=O.some(h);R=[];for(var T=et;it(T,st);T+=nt){var C;if(tt)C=String.fromCharCode(T),C==="\\"&&(C="");else if(C=String(T),Wt){var rt=Pt-C.length;if(rt>0){var ot=new Array(rt+1).join("0");T<0?C="-"+ot+C.slice(1):C=ot+C}}R.push(C)}}else{R=[];for(var D=0;D<O.length;D++)R.push.apply(R,d(O[D],!1))}for(var D=0;D<R.length;D++)for(var E=0;E<$.length;E++){var N=x+R[D]+$[E];(!v||K||N)&&w.push(N)}}return w}return J}var de=pe();const ge=Et(de),me=1024*64,H=s=>{if(typeof s!="string")throw new TypeError("invalid pattern");if(s.length>me)throw new TypeError("pattern is too long")},ye={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},W=s=>s.replace(/[[\]\\-]/g,"\\$&"),ve=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),lt=s=>s.join(""),we=(s,t)=>{const e=t;if(s.charAt(e)!=="[")throw new Error("not in a brace expression");const n=[],i=[];let o=e+1,u=!1,f=!1,p=!1,r=!1,a=e,l="";t:for(;o<s.length;){const d=s.charAt(o);if((d==="!"||d==="^")&&o===e+1){r=!0,o++;continue}if(d==="]"&&u&&!p){a=o+1;break}if(u=!0,d==="\\"&&!p){p=!0,o++;continue}if(d==="["&&!p){for(const[m,[v,w,y]]of Object.entries(ye))if(s.startsWith(m,o)){if(l)return["$.",!1,s.length-e,!0];o+=m.length,y?i.push(v):n.push(v),f=f||w;continue t}}if(p=!1,l){d>l?n.push(W(l)+"-"+W(d)):d===l&&n.push(W(d)),l="",o++;continue}if(s.startsWith("-]",o+1)){n.push(W(d+"-")),o+=2;continue}if(s.startsWith("-",o+1)){l=d,o+=2;continue}n.push(W(d)),o++}if(a<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,s.length-e,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!r){const d=n[0].length===2?n[0].slice(-1):n[0];return[ve(d),!1,a-e,!1]}const h="["+(r?"^":"")+lt(n)+"]",c="["+(r?"":"^")+lt(i)+"]";return[n.length&&i.length?"("+h+"|"+c+")":n.length?h:c,f,a-e,!0]},k=(s,{windowsPathsNoEscape:t=!1}={})=>t?s.replace(/\[([^\/\\])\]/g,"$1"):s.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),Se=new Set(["!","?","+","*","@"]),ht=s=>Se.has(s),be="(?!(?:^|/)\\.\\.?(?:$|/))",U="(?!\\.)",Ee=new Set(["[","."]),xe=new Set(["..","."]),Oe=new Set("().*{}+?[]^$\\!"),je=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Q="[^/]",ft=Q+"*?",pt=Q+"+?";class j{type;#s;#n;#r=!1;#t=[];#e;#o;#c;#a=!1;#i;#u;#h=!1;constructor(t,e,n={}){this.type=t,t&&(this.#n=!0),this.#e=e,this.#s=this.#e?this.#e.#s:this,this.#i=this.#s===this?n:this.#s.#i,this.#c=this.#s===this?[]:this.#s.#c,t==="!"&&!this.#s.#a&&this.#c.push(this),this.#o=this.#e?this.#e.#t.length:0}get hasMagic(){if(this.#n!==void 0)return this.#n;for(const t of this.#t)if(typeof t!="string"&&(t.type||t.hasMagic))return this.#n=!0;return this.#n}toString(){return this.#u!==void 0?this.#u:this.type?this.#u=this.type+"("+this.#t.map(t=>String(t)).join("|")+")":this.#u=this.#t.map(t=>String(t)).join("")}#p(){if(this!==this.#s)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let t;for(;t=this.#c.pop();){if(t.type!=="!")continue;let e=t,n=e.#e;for(;n;){for(let i=e.#o+1;!n.type&&i<n.#t.length;i++)for(const o of t.#t){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#t[i])}e=n,n=e.#e}}return this}push(...t){for(const e of t)if(e!==""){if(typeof e!="string"&&!(e instanceof j&&e.#e===this))throw new Error("invalid part: "+e);this.#t.push(e)}}toJSON(){const t=this.type===null?this.#t.slice().map(e=>typeof e=="string"?e:e.toJSON()):[this.type,...this.#t.map(e=>e.toJSON())];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#s||this.#s.#a&&this.#e?.type==="!")&&t.push({}),t}isStart(){if(this.#s===this)return!0;if(!this.#e?.isStart())return!1;if(this.#o===0)return!0;const t=this.#e;for(let e=0;e<this.#o;e++){const n=t.#t[e];if(!(n instanceof j&&n.type==="!"))return!1}return!0}isEnd(){if(this.#s===this||this.#e?.type==="!")return!0;if(!this.#e?.isEnd())return!1;if(!this.type)return this.#e?.isEnd();const t=this.#e?this.#e.#t.length:0;return this.#o===t-1}copyIn(t){typeof t=="string"?this.push(t):this.push(t.clone(this))}clone(t){const e=new j(this.type,t);for(const n of this.#t)e.copyIn(n);return e}static#l(t,e,n,i){let o=!1,u=!1,f=-1,p=!1;if(e.type===null){let c=n,g="";for(;c<t.length;){const d=t.charAt(c++);if(o||d==="\\"){o=!o,g+=d;continue}if(u){c===f+1?(d==="^"||d==="!")&&(p=!0):d==="]"&&!(c===f+2&&p)&&(u=!1),g+=d;continue}else if(d==="["){u=!0,f=c,p=!1,g+=d;continue}if(!i.noext&&ht(d)&&t.charAt(c)==="("){e.push(g),g="";const m=new j(d,e);c=j.#l(t,m,c,i),e.push(m);continue}g+=d}return e.push(g),c}let r=n+1,a=new j(null,e);const l=[];let h="";for(;r<t.length;){const c=t.charAt(r++);if(o||c==="\\"){o=!o,h+=c;continue}if(u){r===f+1?(c==="^"||c==="!")&&(p=!0):c==="]"&&!(r===f+2&&p)&&(u=!1),h+=c;continue}else if(c==="["){u=!0,f=r,p=!1,h+=c;continue}if(ht(c)&&t.charAt(r)==="("){a.push(h),h="";const g=new j(c,a);a.push(g),r=j.#l(t,g,r,i);continue}if(c==="|"){a.push(h),h="",l.push(a),a=new j(null,e);continue}if(c===")")return h===""&&e.#t.length===0&&(e.#h=!0),a.push(h),h="",e.push(...l,a),r;h+=c}return e.type=null,e.#n=void 0,e.#t=[t.substring(n-1)],r}static fromGlob(t,e={}){const n=new j(null,void 0,e);return j.#l(t,n,0,e),n}toMMPattern(){if(this!==this.#s)return this.#s.toMMPattern();const t=this.toString(),[e,n,i,o]=this.toRegExpSource();if(!(i||this.#n||this.#i.nocase&&!this.#i.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return n;const f=(this.#i.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${e}$`,f),{_src:e,_glob:t})}get options(){return this.#i}toRegExpSource(t){const e=t??!!this.#i.dot;if(this.#s===this&&this.#p(),!this.type){const p=this.isStart()&&this.isEnd(),r=this.#t.map(c=>{const[g,d,m,v]=typeof c=="string"?j.#d(c,this.#n,p):c.toRegExpSource(t);return this.#n=this.#n||m,this.#r=this.#r||v,g}).join("");let a="";if(this.isStart()&&typeof this.#t[0]=="string"&&!(this.#t.length===1&&xe.has(this.#t[0]))){const g=Ee,d=e&&g.has(r.charAt(0))||r.startsWith("\\.")&&g.has(r.charAt(2))||r.startsWith("\\.\\.")&&g.has(r.charAt(4)),m=!e&&!t&&g.has(r.charAt(0));a=d?be:m?U:""}let l="";return this.isEnd()&&this.#s.#a&&this.#e?.type==="!"&&(l="(?:$|\\/)"),[a+r+l,k(r),this.#n=!!this.#n,this.#r]}const n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:";let o=this.#f(e);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){const p=this.toString();return this.#t=[p],this.type=null,this.#n=void 0,[p,k(this.toString()),!1,!1]}let u=!n||t||e||!U?"":this.#f(!0);u===o&&(u=""),u&&(o=`(?:${o})(?:${u})*?`);let f="";if(this.type==="!"&&this.#h)f=(this.isStart()&&!e?U:"")+pt;else{const p=this.type==="!"?"))"+(this.isStart()&&!e&&!t?U:"")+ft+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&u?")":this.type==="*"&&u?")?":`)${this.type}`;f=i+o+p}return[f,k(o),this.#n=!!this.#n,this.#r]}#f(t){return this.#t.map(e=>{if(typeof e=="string")throw new Error("string type in extglob ast??");const[n,i,o,u]=e.toRegExpSource(t);return this.#r=this.#r||u,n}).filter(e=>!(this.isStart()&&this.isEnd())||!!e).join("|")}static#d(t,e,n=!1){let i=!1,o="",u=!1;for(let f=0;f<t.length;f++){const p=t.charAt(f);if(i){i=!1,o+=(Oe.has(p)?"\\":"")+p;continue}if(p==="\\"){f===t.length-1?o+="\\\\":i=!0;continue}if(p==="["){const[r,a,l,h]=we(t,f);if(l){o+=r,u=u||a,f+=l-1,e=e||h;continue}}if(p==="*"){n&&t==="*"?o+=pt:o+=ft,e=!0;continue}if(p==="?"){o+=Q,e=!0;continue}o+=je(p)}return[o,k(t),!!e,u]}}const Ie=(s,{windowsPathsNoEscape:t=!1}={})=>t?s.replace(/[?*()[\]]/g,"[$&]"):s.replace(/[?*()[\]\\]/g,"\\$&");var Z={};const S=(s,t,e={})=>(H(t),!e.nocomment&&t.charAt(0)==="#"?!1:new Y(t,e).match(s)),Ae=/^\*+([^+@!?\*\[\(]*)$/,Me=s=>t=>!t.startsWith(".")&&t.endsWith(s),$e=s=>t=>t.endsWith(s),Ce=s=>(s=s.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(s)),Ne=s=>(s=s.toLowerCase(),t=>t.toLowerCase().endsWith(s)),Re=/^\*+\.\*+$/,De=s=>!s.startsWith(".")&&s.includes("."),Pe=s=>s!=="."&&s!==".."&&s.includes("."),Te=/^\.\*+$/,We=s=>s!=="."&&s!==".."&&s.startsWith("."),Le=/^\*+$/,ke=s=>s.length!==0&&!s.startsWith("."),Ke=s=>s.length!==0&&s!=="."&&s!=="..",ze=/^\?+([^+@!?\*\[\(]*)?$/,Be=([s,t=""])=>{const e=It([s]);return t?(t=t.toLowerCase(),n=>e(n)&&n.toLowerCase().endsWith(t)):e},Ue=([s,t=""])=>{const e=At([s]);return t?(t=t.toLowerCase(),n=>e(n)&&n.toLowerCase().endsWith(t)):e},_e=([s,t=""])=>{const e=At([s]);return t?n=>e(n)&&n.endsWith(t):e},qe=([s,t=""])=>{const e=It([s]);return t?n=>e(n)&&n.endsWith(t):e},It=([s])=>{const t=s.length;return e=>e.length===t&&!e.startsWith(".")},At=([s])=>{const t=s.length;return e=>e.length===t&&e!=="."&&e!==".."},Mt=typeof process=="object"&&process?typeof Z=="object"&&Z&&Z.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",dt={win32:{sep:"\\"},posix:{sep:"/"}},Ge=Mt==="win32"?dt.win32.sep:dt.posix.sep;S.sep=Ge;const M=Symbol("globstar **");S.GLOBSTAR=M;const He="[^/]",Ye=He+"*?",Fe="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Je="(?:(?!(?:\\/|^)\\.).)*?",Ze=(s,t={})=>e=>S(e,s,t);S.filter=Ze;const A=(s,t={})=>Object.assign({},s,t),Ve=s=>{if(!s||typeof s!="object"||!Object.keys(s).length)return S;const t=S;return Object.assign((n,i,o={})=>t(n,i,A(s,o)),{Minimatch:class extends t.Minimatch{constructor(i,o={}){super(i,A(s,o))}static defaults(i){return t.defaults(A(s,i)).Minimatch}},AST:class extends t.AST{constructor(i,o,u={}){super(i,o,A(s,u))}static fromGlob(i,o={}){return t.AST.fromGlob(i,A(s,o))}},unescape:(n,i={})=>t.unescape(n,A(s,i)),escape:(n,i={})=>t.escape(n,A(s,i)),filter:(n,i={})=>t.filter(n,A(s,i)),defaults:n=>t.defaults(A(s,n)),makeRe:(n,i={})=>t.makeRe(n,A(s,i)),braceExpand:(n,i={})=>t.braceExpand(n,A(s,i)),match:(n,i,o={})=>t.match(n,i,A(s,o)),sep:t.sep,GLOBSTAR:M})};S.defaults=Ve;const $t=(s,t={})=>(H(s),t.nobrace||!/\{(?:(?!\{).)*\}/.test(s)?[s]:ge(s));S.braceExpand=$t;const Xe=(s,t={})=>new Y(s,t).makeRe();S.makeRe=Xe;const Qe=(s,t,e={})=>{const n=new Y(t,e);return s=s.filter(i=>n.match(i)),n.options.nonull&&!s.length&&s.push(t),s};S.match=Qe;const gt=/[?*]|[+@!]\(.*?\)|\[|\]/,ts=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class Y{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){H(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||Mt,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot!==void 0?e.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const t of this.set)for(const e of t)if(typeof e!="string")return!0;return!1}debug(...t){}make(){const t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);const n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,u,f)=>{if(this.isWindows&&this.windowsNoMagicRoot){const p=o[0]===""&&o[1]===""&&(o[2]==="?"||!gt.test(o[2]))&&!gt.test(o[3]),r=/^[a-z]:/i.test(o[0]);if(p)return[...o.slice(0,4),...o.slice(4).map(a=>this.parse(a))];if(r)return[o[0],...o.slice(1).map(a=>this.parse(a))]}return o.map(p=>this.parse(p))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){const u=this.set[o];u[0]===""&&u[1]===""&&this.globParts[o][2]==="?"&&typeof u[3]=="string"&&/^[a-z]:$/i.test(u[3])&&(u[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let n=0;n<t.length;n++)for(let i=0;i<t[n].length;i++)t[n][i]==="**"&&(t[n][i]="*");const{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):e>=1?t=this.levelOneOptimize(t):t=this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let n=-1;for(;(n=e.indexOf("**",n+1))!==-1;){let i=n;for(;e[i+1]==="**";)i++;i!==n&&e.splice(n,i-n)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((n,i)=>{const o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),e.length===0?[""]:e))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let i=1;i<t.length-1;i++){const o=t[i];i===1&&o===""&&t[0]===""||(o==="."||o==="")&&(e=!0,t.splice(i,1),i--)}t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")&&(e=!0,t.pop())}let n=0;for(;(n=t.indexOf("..",n+1))!==-1;){const i=t[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(e=!0,t.splice(n-1,2),n-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let n of t){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let u=i;for(;n[u+1]==="**";)u++;u>i&&n.splice(i+1,u-i);let f=n[i+1];const p=n[i+2],r=n[i+3];if(f!==".."||!p||p==="."||p===".."||!r||r==="."||r==="..")continue;e=!0,n.splice(i,1);const a=n.slice(0);a[i]="**",t.push(a),i--}if(!this.preserveMultipleSlashes){for(let u=1;u<n.length-1;u++){const f=n[u];u===1&&f===""&&n[0]===""||(f==="."||f==="")&&(e=!0,n.splice(u,1),u--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(e=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){const u=n[o-1];if(u&&u!=="."&&u!==".."&&u!=="**"){e=!0;const p=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...p),n.length===0&&n.push(""),o-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let n=e+1;n<t.length;n++){const i=this.partsMatch(t[e],t[n],!this.preserveMultipleSlashes);if(i){t[e]=[],t[n]=i;break}}return t.filter(e=>e.length)}partsMatch(t,e,n=!1){let i=0,o=0,u=[],f="";for(;i<t.length&&o<e.length;)if(t[i]===e[o])u.push(f==="b"?e[o]:t[i]),i++,o++;else if(n&&t[i]==="**"&&e[o]===t[i+1])u.push(t[i]),i++;else if(n&&e[o]==="**"&&t[i]===e[o+1])u.push(e[o]),o++;else if(t[i]==="*"&&e[o]&&(this.options.dot||!e[o].startsWith("."))&&e[o]!=="**"){if(f==="b")return!1;f="a",u.push(t[i]),i++,o++}else if(e[o]==="*"&&t[i]&&(this.options.dot||!t[i].startsWith("."))&&t[i]!=="**"){if(f==="a")return!1;f="b",u.push(e[o]),i++,o++}else return!1;return t.length===e.length&&u}parseNegate(){if(this.nonegate)return;const t=this.pattern;let e=!1,n=0;for(let i=0;i<t.length&&t.charAt(i)==="!";i++)e=!e,n++;n&&(this.pattern=t.slice(n)),this.negate=e}matchOne(t,e,n=!1){const i=this.options;if(this.isWindows){const d=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),m=!d&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]),v=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),w=!v&&e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),y=m?3:d?0:void 0,x=w?3:v?0:void 0;if(typeof y=="number"&&typeof x=="number"){const[$,E]=[t[y],e[x]];$.toLowerCase()===E.toLowerCase()&&(e[x]=$,x>y?e=e.slice(x):y>x&&(t=t.slice(y)))}}const{optimizationLevel:o=1}=this.options;o>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var u=0,f=0,p=t.length,r=e.length;u<p&&f<r;u++,f++){this.debug("matchOne loop");var a=e[f],l=t[u];if(this.debug(e,a,l),a===!1)return!1;if(a===M){this.debug("GLOBSTAR",[e,a,l]);var h=u,c=f+1;if(c===r){for(this.debug("** at the end");u<p;u++)if(t[u]==="."||t[u]===".."||!i.dot&&t[u].charAt(0)===".")return!1;return!0}for(;h<p;){var g=t[h];if(this.debug(`
globstar while`,t,h,e,c,g),this.matchOne(t.slice(h),e.slice(c),n))return this.debug("globstar found match!",h,p,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",t,h,e,c);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(n&&(this.debug(`
>>> no match, partial?`,t,h,e,c),h===p))}let d;if(typeof a=="string"?(d=l===a,this.debug("string match",a,l,d)):(d=a.test(l),this.debug("pattern match",a,l,d)),!d)return!1}if(u===p&&f===r)return!0;if(u===p)return n;if(f===r)return u===p-1&&t[u]==="";throw new Error("wtf?")}braceExpand(){return $t(this.pattern,this.options)}parse(t){H(t);const e=this.options;if(t==="**")return M;if(t==="")return"";let n,i=null;(n=t.match(Le))?i=e.dot?Ke:ke:(n=t.match(Ae))?i=(e.nocase?e.dot?Ne:Ce:e.dot?$e:Me)(n[1]):(n=t.match(ze))?i=(e.nocase?e.dot?Ue:Be:e.dot?_e:qe)(n):(n=t.match(Re))?i=e.dot?Pe:De:(n=t.match(Te))&&(i=We);const o=j.fromGlob(t,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const e=this.options,n=e.noglobstar?Ye:e.dot?Fe:Je,i=new Set(e.nocase?["i"]:[]);let o=t.map(p=>{const r=p.map(a=>{if(a instanceof RegExp)for(const l of a.flags.split(""))i.add(l);return typeof a=="string"?ts(a):a===M?M:a._src});return r.forEach((a,l)=>{const h=r[l+1],c=r[l-1];a!==M||c===M||(c===void 0?h!==void 0&&h!==M?r[l+1]="(?:\\/|"+n+"\\/)?"+h:r[l]=n:h===void 0?r[l-1]=c+"(?:\\/|"+n+")?":h!==M&&(r[l-1]=c+"(?:\\/|\\/"+n+"\\/)"+h,r[l+1]=M))}),r.filter(a=>a!==M).join("/")}).join("|");const[u,f]=t.length>1?["(?:",")"]:["",""];o="^"+u+o+f+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;const n=this.options;this.isWindows&&(t=t.split("\\").join("/"));const i=this.slashSplit(t);this.debug(this.pattern,"split",i);const o=this.set;this.debug(this.pattern,"set",o);let u=i[i.length-1];if(!u)for(let f=i.length-2;!u&&f>=0;f--)u=i[f];for(let f=0;f<o.length;f++){const p=o[f];let r=i;if(n.matchBase&&p.length===1&&(r=[u]),this.matchOne(r,p,e))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(t){return S.defaults(t).Minimatch}}S.AST=j;S.Minimatch=Y;S.escape=Ie;S.unescape=k;const es=(s,t)=>{let e;return Object.values(t).find(i=>!i.source||i.source.length===0?void 0:(s==="/"?["index.yml","index.yaml","index.md","index.json"]:[s]).some(u=>(e=i.source.find(f=>{const p=S(u,f.include,{dot:!0}),r=f.exclude?.some(a=>S(u,a));return p&&!r}),e)))};function ss(s,t){const{fixed:e}=Nt(t.source[0]),n=s.substring(e.length);return bt(t.name,t.source[0]?.prefix||"",n)}function Ct(s){const t=Object.values(s.definitions)[0]?.properties||{},e=new Set([t.id?"id":void 0,t.title?"title":void 0,...Object.keys(t).sort()].filter(Boolean));return Array.from(e)}function ns(s,t){const e=t[s];if(!e)throw new Error(`Collection ${s} not found`);return e}function is(s,t){const[e,...n]=s.split(/[/:]/),i=n.join("/");return t.source.find(u=>{const f=S(i,u.include,{dot:!0}),p=u.exclude?.some(r=>S(i,r));return f&&!p})}function rs(s,t){const[e,...n]=s.split(/[/:]/),i=n.join("/"),{fixed:o}=Nt(t),u=i.substring(o.length);return bt(o,u)}function V(s,t){const e=ns(s.split(/[/:]/)[0],t),n=is(s,e),i=rs(s,n);return{collection:e,source:n,fsPath:i}}function Nt(s){const[t,...e]=s.include.includes("*")?s.include.split("*"):["",s.include];return{fixed:t||"",dynamic:"*"+e.join("*")}}function mt(s,t,e){const n=[ce].reduce((f,p)=>s.type==="page"?p(f):f,{...e,id:t}),i={id:t},o=n.meta,u=Ct(s.schema);for(const f of Object.keys(n))u.includes(f)?i[f]=n[f]:o[f]=n[f];if(i.meta=o,u.includes("seo")){const f=i.seo=i.seo||{};f.title=f.title||i.title,f.description=f.description||i.description}return i}function os(s){if(s?.seo){const t=s.seo;(!t.title||t.title===s.title)&&Reflect.deleteProperty(s.seo,"title"),(!t.description||t.description===s.description)&&Reflect.deleteProperty(s.seo,"description"),Object.keys(t).length===0&&Reflect.deleteProperty(s,"seo")}return s}function as(s,t){const e=[],n=s.schema.definitions[s.name].properties;return Ct(s.schema).forEach(o=>{const u=n[o],f=s.fields[o],p=u?.default!==void 0?u.default:"NULL",r=typeof t[o]<"u"?t[o]:p;f==="json"?e.push(`'${JSON.stringify(r).replace(/'/g,"''")}'`):f==="string"||["string","enum"].includes(u.type)?["data","datetime"].includes(u.format)?e.push(r!=="NULL"?`'${new Date(r).toISOString()}'`:p):e.push(`'${String(r).replace(/\n/g,"\\n").replace(/'/g,"''")}'`):f==="boolean"?e.push(r!=="NULL"?!!r:r):e.push(r)}),e.push(`'${kt(e)}'`),e}function cs(s,t){const e=as(s,t);let n=0;return`INSERT INTO ${s.tableName} VALUES (${"?, ".repeat(e.length).slice(0,-2)})`.replace(/\?/g,()=>e[n++])}function yt(s,t){return`DELETE FROM ${s.tableName} WHERE id = '${t}';`}function us(s){return!s||typeof s.then!="function"?Promise.resolve(s):s}function b(s,...t){try{return us(s(...t))}catch(e){return Promise.reject(e)}}function ls(s){const t=typeof s;return s===null||t!=="object"&&t!=="function"}function hs(s){const t=Object.getPrototypeOf(s);return!t||t.isPrototypeOf(Object)}function G(s){if(ls(s))return String(s);if(hs(s)||Array.isArray(s))return JSON.stringify(s);if(typeof s.toJSON=="function")return G(s.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const X="base64:";function fs(s){return typeof s=="string"?s:X+gs(s)}function ps(s){return typeof s!="string"||!s.startsWith(X)?s:ds(s.slice(X.length))}function ds(s){return globalThis.Buffer?Buffer.from(s,"base64"):Uint8Array.from(globalThis.atob(s),t=>t.codePointAt(0))}function gs(s){return globalThis.Buffer?Buffer.from(s).toString("base64"):globalThis.btoa(String.fromCodePoint(...s))}function I(s){return s&&s.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function ms(...s){return I(s.join(":"))}function _(s){return s=I(s),s?s+":":""}function ys(s,t){if(t===void 0)return!0;let e=0,n=s.indexOf(":");for(;n>-1;)e++,n=s.indexOf(":",n+1);return e<=t}function vs(s,t){return t?s.startsWith(t)&&s[s.length-1]!=="$":s[s.length-1]!=="$"}const ws="memory",Ss=()=>{const s=new Map;return{name:ws,getInstance:()=>s,hasItem(t){return s.has(t)},getItem(t){return s.get(t)??null},getItemRaw(t){return s.get(t)??null},setItem(t,e){s.set(t,e)},setItemRaw(t,e){s.set(t,e)},removeItem(t){s.delete(t)},getKeys(){return[...s.keys()]},clear(){s.clear()},dispose(){s.clear()}}};function bs(s={}){const t={mounts:{"":s.driver||Ss()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},e=r=>{for(const a of t.mountpoints)if(r.startsWith(a))return{base:a,relativeKey:r.slice(a.length),driver:t.mounts[a]};return{base:"",relativeKey:r,driver:t.mounts[""]}},n=(r,a)=>t.mountpoints.filter(l=>l.startsWith(r)||a&&r.startsWith(l)).map(l=>({relativeBase:r.length>l.length?r.slice(l.length):void 0,mountpoint:l,driver:t.mounts[l]})),i=(r,a)=>{if(t.watching){a=I(a);for(const l of t.watchListeners)l(r,a)}},o=async()=>{if(!t.watching){t.watching=!0;for(const r in t.mounts)t.unwatch[r]=await vt(t.mounts[r],i,r)}},u=async()=>{if(t.watching){for(const r in t.unwatch)await t.unwatch[r]();t.unwatch={},t.watching=!1}},f=(r,a,l)=>{const h=new Map,c=g=>{let d=h.get(g.base);return d||(d={driver:g.driver,base:g.base,items:[]},h.set(g.base,d)),d};for(const g of r){const d=typeof g=="string",m=I(d?g:g.key),v=d?void 0:g.value,w=d||!g.options?a:{...a,...g.options},y=e(m);c(y).items.push({key:m,value:v,relativeKey:y.relativeKey,options:w})}return Promise.all([...h.values()].map(g=>l(g))).then(g=>g.flat())},p={hasItem(r,a={}){r=I(r);const{relativeKey:l,driver:h}=e(r);return b(h.hasItem,l,a)},getItem(r,a={}){r=I(r);const{relativeKey:l,driver:h}=e(r);return b(h.getItem,l,a).then(c=>z(c))},getItems(r,a={}){return f(r,a,l=>l.driver.getItems?b(l.driver.getItems,l.items.map(h=>({key:h.relativeKey,options:h.options})),a).then(h=>h.map(c=>({key:ms(l.base,c.key),value:z(c.value)}))):Promise.all(l.items.map(h=>b(l.driver.getItem,h.relativeKey,h.options).then(c=>({key:h.key,value:z(c)})))))},getItemRaw(r,a={}){r=I(r);const{relativeKey:l,driver:h}=e(r);return h.getItemRaw?b(h.getItemRaw,l,a):b(h.getItem,l,a).then(c=>ps(c))},async setItem(r,a,l={}){if(a===void 0)return p.removeItem(r);r=I(r);const{relativeKey:h,driver:c}=e(r);c.setItem&&(await b(c.setItem,h,G(a),l),c.watch||i("update",r))},async setItems(r,a){await f(r,a,async l=>{if(l.driver.setItems)return b(l.driver.setItems,l.items.map(h=>({key:h.relativeKey,value:G(h.value),options:h.options})),a);l.driver.setItem&&await Promise.all(l.items.map(h=>b(l.driver.setItem,h.relativeKey,G(h.value),h.options)))})},async setItemRaw(r,a,l={}){if(a===void 0)return p.removeItem(r,l);r=I(r);const{relativeKey:h,driver:c}=e(r);if(c.setItemRaw)await b(c.setItemRaw,h,a,l);else if(c.setItem)await b(c.setItem,h,fs(a),l);else return;c.watch||i("update",r)},async removeItem(r,a={}){typeof a=="boolean"&&(a={removeMeta:a}),r=I(r);const{relativeKey:l,driver:h}=e(r);h.removeItem&&(await b(h.removeItem,l,a),(a.removeMeta||a.removeMata)&&await b(h.removeItem,l+"$",a),h.watch||i("remove",r))},async getMeta(r,a={}){typeof a=="boolean"&&(a={nativeOnly:a}),r=I(r);const{relativeKey:l,driver:h}=e(r),c=Object.create(null);if(h.getMeta&&Object.assign(c,await b(h.getMeta,l,a)),!a.nativeOnly){const g=await b(h.getItem,l+"$",a).then(d=>z(d));g&&typeof g=="object"&&(typeof g.atime=="string"&&(g.atime=new Date(g.atime)),typeof g.mtime=="string"&&(g.mtime=new Date(g.mtime)),Object.assign(c,g))}return c},setMeta(r,a,l={}){return this.setItem(r+"$",a,l)},removeMeta(r,a={}){return this.removeItem(r+"$",a)},async getKeys(r,a={}){r=_(r);const l=n(r,!0);let h=[];const c=[];let g=!0;for(const m of l){m.driver.flags?.maxDepth||(g=!1);const v=await b(m.driver.getKeys,m.relativeBase,a);for(const w of v){const y=m.mountpoint+I(w);h.some(x=>y.startsWith(x))||c.push(y)}h=[m.mountpoint,...h.filter(w=>!w.startsWith(m.mountpoint))]}const d=a.maxDepth!==void 0&&!g;return c.filter(m=>(!d||ys(m,a.maxDepth))&&vs(m,r))},async clear(r,a={}){r=_(r),await Promise.all(n(r,!1).map(async l=>{if(l.driver.clear)return b(l.driver.clear,l.relativeBase,a);if(l.driver.removeItem){const h=await l.driver.getKeys(l.relativeBase||"",a);return Promise.all(h.map(c=>l.driver.removeItem(c,a)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(r=>wt(r)))},async watch(r){return await o(),t.watchListeners.push(r),async()=>{t.watchListeners=t.watchListeners.filter(a=>a!==r),t.watchListeners.length===0&&await u()}},async unwatch(){t.watchListeners=[],await u()},mount(r,a){if(r=_(r),r&&t.mounts[r])throw new Error(`already mounted at ${r}`);return r&&(t.mountpoints.push(r),t.mountpoints.sort((l,h)=>h.length-l.length)),t.mounts[r]=a,t.watching&&Promise.resolve(vt(a,i,r)).then(l=>{t.unwatch[r]=l}).catch(console.error),p},async unmount(r,a=!0){r=_(r),!(!r||!t.mounts[r])&&(t.watching&&r in t.unwatch&&(t.unwatch[r]?.(),delete t.unwatch[r]),a&&await wt(t.mounts[r]),t.mountpoints=t.mountpoints.filter(l=>l!==r),delete t.mounts[r])},getMount(r=""){r=I(r)+":";const a=e(r);return{driver:a.driver,base:a.base}},getMounts(r="",a={}){return r=I(r),n(r,a.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(r,a={})=>p.getKeys(r,a),get:(r,a={})=>p.getItem(r,a),set:(r,a,l={})=>p.setItem(r,a,l),has:(r,a={})=>p.hasItem(r,a),del:(r,a={})=>p.removeItem(r,a),remove:(r,a={})=>p.removeItem(r,a)};return p}function vt(s,t,e){return s.watch?s.watch((n,i)=>t(n,e+i)):()=>{}}async function wt(s){typeof s.dispose=="function"&&await b(s.dispose)}const P=bs({});P.setItem("public-assets/favicon.ico",{id:"public-assets/favicon.ico",extension:"ico",stem:"favicon.ico",path:"/favicon.ico"});P.setItem("public-assets/images/.gitkeep",{id:"public-assets/images/.gitkeep",extension:"gitkeep",stem:"images:.gitkeep",path:"/images/.gitkeep"});P.setItem("public-assets/images/123.jpg",{id:"public-assets/images/123.jpg",extension:"jpg",stem:"images:123.jpg",path:"/images/123.jpg"});P.setItem("public-assets/images/kit-stepan.jpg",{id:"public-assets/images/kit-stepan.jpg",extension:"jpg",stem:"images:kit-stepan.jpg",path:"/images/kit-stepan.jpg"});P.setItem("public-assets/images/red_cat_2.jpg",{id:"public-assets/images/red_cat_2.jpg",extension:"jpg",stem:"images:red_cat_2.jpg",path:"/images/red_cat_2.jpg"});const L=P;function Es(s){return Zt()?(Vt(s),!0):!1}function xs(s){let t=0,e,n;const i=()=>{t-=1,n&&t<=0&&(n.stop(),e=void 0,n=void 0)};return(...o)=>(t+=1,n||(n=Jt(!0),e=n.run(()=>s(...o))),Es(i),e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Os=xs(()=>{const s=Xt([]),t=xt();async function e(){const n=await $fetch("/__nuxt_studio/meta",{headers:{"content-type":"application/json"}}).catch(()=>({components:[]}));s.value=n.components||[]}return{meta:t,fetch:e,componentsMeta:s}}),js="v0.0.1";function Is(){let s=440;if(typeof window<"u"&&window.localStorage){const t=localStorage.getItem("studio-sidebar-width");if(t){const e=Number.parseInt(t,10);if(!Number.isNaN(e))return s=e,e}}return s}function As(){const s=Is();return{"body[data-studio-active]":{transition:"margin 0.2s ease"},"body[data-studio-active][data-expand-sidebar]":{marginLeft:`${s}px`}}}function St(){return document.documentElement.classList.contains("dark")?"dark":"light"}function Ts(s,t){let e=null,n=St();const i=xt(!1),o=Os();function u(){return window.useNuxtApp()}function f(){return u().$router}function p(){return{...u().$content||{},queryCollection:Gt,queryCollectionItemSurroundings:qt,queryCollectionNavigation:_t,queryCollectionSearchSections:Ut,collections:Kt}}function r(c){return e(c)}function a(){return Object.fromEntries(Object.entries(p().collections).filter(([,c])=>!(!c.source.length||c.source.some(g=>g.repository||g._custom))))}function l(c){return p().queryCollection(c)}const h={meta:{dev:!1,components:()=>o.componentsMeta.value},on:{routeChange:c=>{f()?.afterEach?.((d,m)=>{c(d,m)})},mounted:c=>B(()=>i.value,400).then(c),beforeUnload:c=>{h.ui.deactivateStudio(),B(()=>i.value).then(()=>{window.addEventListener("beforeunload",c)})},colorModeChange:c=>{new MutationObserver(()=>{n=St(),c(n)}).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})},manifestUpdate:c=>{u().hooks.hookOnce("app:manifest:update",g=>c(g.id))},documentUpdate:c=>{},mediaUpdate:c=>{}},ui:{colorMode:n,activateStudio:()=>{document.body.setAttribute("data-studio-active","true")},deactivateStudio:()=>{document.body.removeAttribute("data-studio-active"),h.ui.collapseSidebar(),h.ui.updateStyles()},expandSidebar:()=>{document.body.setAttribute("data-expand-sidebar","true"),h.ui.updateStyles()},collapseSidebar:()=>{document.body.removeAttribute("data-expand-sidebar"),h.ui.updateStyles()},updateStyles:()=>{const c=As(),g=Object.keys(c).map(m=>{if(m==="css")return c.css||"";const v=Object.entries(c[m]).map(([w,y])=>`${Bt(w)}: ${y}`).join(";");return`${m} { ${v} }`}).join("");let d=document.querySelector("[data-studio-style]");d||(d=document.createElement("style"),d.setAttribute("data-studio-style",""),document.head.appendChild(d)),d.textContent=g}},repository:t,user:{get:()=>s},document:{get:async c=>{const g=await l(c.split("/")[0]).where("id","=",c).first();return os(g)},getFileSystemPath:c=>V(c,a()).fsPath,list:async()=>{const c=Object.keys(a()).filter(d=>d!=="info");return(await Promise.all(c.map(async d=>await l(d).all()))).flat()},create:async(c,g)=>{const d=a(),m=es(c,d),v=ss(c,m);if(await h.document.get(v))throw new Error(`Cannot create document with id "${v}": document already exists.`);const y=await ee(v,g),x=mt(m,v,y);return await h.document.upsert(v,x),x},upsert:async(c,g)=>{c=c.replace(/:/g,"/");const d=V(c,a()).collection,m=mt(d,c,g);await r(d.name).exec(yt(d,c)),await r(d.name).exec(cs(d,m))},delete:async c=>{c=c.replace(/:/g,"/");const g=V(c,a()).collection;await r(g.name).exec(yt(g,c))},detectActives:()=>{const c=document.querySelectorAll("[data-content-id]");return Array.from(c).map(g=>{const d=g.getAttribute("data-content-id"),m=d.split(/[/:]/).pop()||d;return{id:d,title:m}})}},media:{get:async c=>await L.getItem(c),getFileSystemPath:c=>c.split("/").slice(1).join("/"),list:async()=>await Promise.all(await L.getKeys().then(c=>c.map(g=>L.getItem(g)))),upsert:async(c,g)=>{await L.setItem(c,g)},delete:async c=>{await L.removeItem(c)}},app:{getManifestId:async()=>(await te()).id,requestRerender:async()=>{u().payload.error&&await Qt({redirect:`?t=${Date.now()}`}),u().hooks.callHookParallel("app:data:refresh")},navigateTo:c=>{f().push(c)}}};return(async()=>(h.ui.activateStudio(),B(()=>p().queryCollection!==void 0,500).then(()=>B(()=>p().loadLocalDatabase!==void 0)).then(()=>p().loadLocalDatabase()).then(c=>{e=c,i.value=!0}).then(()=>("serviceWorker"in navigator&&navigator.serviceWorker.register(`/sw.js?${js}`),o.fetch()))))(),h}export{Ts as useStudioHost};
